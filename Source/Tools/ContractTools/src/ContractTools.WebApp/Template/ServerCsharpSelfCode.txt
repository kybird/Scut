using ProtoBuf;
using System;
using System.Collections.Generic;
##RefNamespace##

using ZyGames.Framework.Common.Serialization;
using rolaweb.Script.CsScript.Action;

namespace ##Namespace##
{

   
    /// <summary>
    /// ##Description##
    /// </summary>
    /// <remarks>BaseStruct클래스를상속: 신분증명없는요청을허용;AuthorizeAction:신분증명이필요한요청</remarks>
    public class Action##ID## : ProtoAuthAction
    {
##Request##
##Response##

	RequestPack _requestPack;
	ResponsePack _responsePack;

        public Action##ID##(ActionGetter actionGetter)
            : base((short)##ID##, actionGetter)
        {
            
        }

        /// <summary>
        /// Action 이 권한부여가 필요한지검사
        /// </summary>
        protected override bool IgnoreActionId
        {
            get{ return true; }
        }

        /// <summary>
        /// 클라이언트 요청파라메터 검사
        /// </summary>
        /// <returns>false: stop following operation and return Error</returns>
        public override bool GetUrlElement()
        {
            byte[] data = (byte[])actionGetter.GetMessage();
			if (data.Length >0)
			{
				_requestPack = ProtoBufUtils.Deserialize<RequestPack>(data);

				return true;
			}
			return false;
        }

		protected override bool IgnoreActionId
		{
			get { return true; }
		}

        /// <summary>
        /// business logic process
        /// </summary>
        /// <returns>false:stop following mothod and return error</returns>
        public override bool TakeAction()
        {
		    // in here process logic
            return true;
        }

        /// <summary>
        /// data structure that send to client
        /// </summary>
        protected override byte[] BuildResponsePack()
        {
            return ProtoBufUtils.Serialize(_responsePack);
        }




    }
}
